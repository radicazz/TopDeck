using UnityEngine;using System;public class UpgradeSystem : MonoBehaviour{ public static UpgradeSystem Instance {get; private set;} [SerializeField]int _maxTowerLevel=3; [SerializeField]int _maxDefenderLevel=3; public int TowerLevel {get; private set;}=1; public int DefenderLevel {get; private set;}=1; public event Action<int> OnTowerUpgrade; public event Action<int> OnDefenderUpgrade; void Awake(){ if(Instance!=null&&Instance!=this){ Destroy(gameObject); return;} Instance=this; } public bool CanUpgradeTower()=>TowerLevel<_maxTowerLevel; public bool CanUpgradeDefender()=>DefenderLevel<_maxDefenderLevel; public void UpgradeTower(){ if(!CanUpgradeTower()) return; TowerLevel++; OnTowerUpgrade?.Invoke(TowerLevel); VfxManager.SpawnUpgradeFlash(Vector3.zero); } public void UpgradeDefender(){ if(!CanUpgradeDefender()) return; DefenderLevel++; OnDefenderUpgrade?.Invoke(DefenderLevel); VfxManager.SpawnUpgradeFlash(Vector3.zero); }}