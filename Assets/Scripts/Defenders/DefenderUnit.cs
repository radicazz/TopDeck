using UnityEngine;public class DefenderUnit : MonoBehaviour{ [SerializeField] int _baseHealth=20; [SerializeField] float _baseAttackInterval=1.5f; [SerializeField] int _baseDamage=3; float _mult=1f; float _timer; public void SetStatMultiplier(float m){ _mult=m; } void Update(){ _timer+=Time.deltaTime; if(_timer>=_baseAttackInterval/Mathf.Max(0.1f,_mult)){ _timer=0f; Attack(); } } void Attack(){ var enemy=FindClosest(); if(enemy!=null){ enemy.TakeDamage(Mathf.RoundToInt(_baseDamage*_mult)); VfxManager.SpawnHit(enemy.transform.position); } } EnemyUnit FindClosest(){ EnemyUnit best=null; float bd=float.MaxValue; foreach(var e in Object.FindObjectsByType<EnemyUnit>(FindObjectsSortMode.None)){ float d=Vector3.Distance(transform.position,e.transform.position); if(d<bd){ bd=d; best=e; } } return best; }}