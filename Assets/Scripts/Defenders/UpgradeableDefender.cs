using UnityEngine;public class UpgradeableDefender : MonoBehaviour{ [SerializeField] DefenderUnit _defender; [SerializeField] SpriteRenderer _visual; [SerializeField] Color[] _levelColors; void OnEnable(){ if(UpgradeSystem.Instance!=null) UpgradeSystem.Instance.OnDefenderUpgrade+=Apply; } void OnDisable(){ if(UpgradeSystem.Instance!=null) UpgradeSystem.Instance.OnDefenderUpgrade-=Apply; } void Start(){ Apply(UpgradeSystem.Instance!=null?UpgradeSystem.Instance.DefenderLevel:1); } void Apply(int level){ if(_defender!=null){ _defender.SetStatMultiplier(1f+0.25f*(level-1)); } if(_visual!=null && _levelColors!=null && _levelColors.Length>0){ var idx=Mathf.Clamp(level-1,0,_levelColors.Length-1); _visual.color=_levelColors[idx]; transform.localScale=Vector3.one*(1f+0.05f*(level-1)); } }}